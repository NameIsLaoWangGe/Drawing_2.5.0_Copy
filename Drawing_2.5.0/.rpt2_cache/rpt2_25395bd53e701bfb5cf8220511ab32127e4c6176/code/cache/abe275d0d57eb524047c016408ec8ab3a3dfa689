{
  "code": "import ADManager, { TaT } from \"../TJ/Admanager\";\r\nimport { Admin, Animation2D, Click, Dialogue, _Gold, _SceneName } from \"./Lwg\";\r\nimport TweenMgr from \"./TweenMgr\";\r\nimport { _Game } from \"./_Game\";\r\nexport var _Test;\r\n(function (_Test) {\r\n    class TreasureItem {\r\n        constructor(id, obj, ui) {\r\n            this.isAD = false;\r\n            this.id = id;\r\n            this.ui = ui;\r\n            let baoshi = obj.getChildByName(\"baoshi\");\r\n            this.baoshi = baoshi;\r\n            let frame = obj.getChildByName(\"Frame\");\r\n            this.box = obj.getChildByName(\"Box\");\r\n            this.box.skin = \"Game/UI/TreasureNew/baoxiang.png\";\r\n            this.frame = frame;\r\n            this.num = frame.getChildByName(\"Num\");\r\n            this.g1 = frame.getChildByName(\"G1\");\r\n            this.g2 = frame.getChildByName(\"G2\");\r\n            this._close = true;\r\n            this._gold = TweenMgr.randomInRange_i(5, 10);\r\n            this.baoshi.visible = false;\r\n            this.frame.visible = false;\r\n            this.num.value = this._gold.toString();\r\n            if (this._gold < 7) {\r\n                this.g2.visible = false;\r\n                this.g1.x = 66;\r\n            }\r\n        }\r\n        clickItem() {\r\n            if (this._close) {\r\n                if (this.isAD) {\r\n                    ADManager.ShowReward(() => {\r\n                        this.ClickBox();\r\n                        ADManager.TAPoint(TaT.BtnClick, 'ADrewardbox_box');\r\n                    }, null);\r\n                }\r\n                else {\r\n                    if (_Test.leftTimes > 0) {\r\n                        _Test.leftTimes -= 1;\r\n                        this.ClickBox();\r\n                    }\r\n                    else {\r\n                        Dialogue.createHint_Middle(`点击再开一次可获得机会继续！`);\r\n                    }\r\n                }\r\n            }\r\n        }\r\n        ClickBox() {\r\n            console.log(\"点击宝箱\");\r\n            _Test.boxOpenCount++;\r\n            if (_Game._ColoursPencils._switch != true) {\r\n                if (_Test.boxOpenCount < 3) {\r\n                    _Test.BS30.visible = true;\r\n                }\r\n                else if (_Test.boxOpenCount == 4) {\r\n                    _Test.BS30.visible = false;\r\n                    _Test.BS50.visible = true;\r\n                }\r\n                else if (_Test.boxOpenCount == 8) {\r\n                    _Test.BS50.visible = false;\r\n                    _Test.BS100.visible = true;\r\n                }\r\n                else if (_Test.boxOpenCount == 9) {\r\n                    _Test.BSjihui.visible = false;\r\n                }\r\n            }\r\n            if (_Test.boxOpenCount == 9) {\r\n                if (_Game._ColoursPencils._switch != true) {\r\n                    _Game._DhadthCont = 1;\r\n                    Laya.LocalStorage.setItem(\"_DhadthCont\", _Game._DhadthCont.toString());\r\n                    Dialogue.createHint_Middle(`恭喜获得彩色画笔！`);\r\n                    this.openshow2();\r\n                    return;\r\n                }\r\n            }\r\n            Animation2D.bomb_LeftRight(this.box, 1.20, 250, () => {\r\n                this._close = false;\r\n                _Gold._getGoldAni_Heap(Laya.stage, 15, 55, 51, `Game/UI/Victory/jb.png`, null, null, null, () => {\r\n                    _Gold._addGold(this._gold);\r\n                });\r\n                this.frame.visible = true;\r\n                this.ui.checkTimes(0);\r\n            });\r\n        }\r\n        openshow2() {\r\n            Animation2D.bomb_LeftRight(this.box, 1.20, 250, () => {\r\n                this.g1.visible = false;\r\n                this.g2.visible = false;\r\n                this.num.visible = false;\r\n                this.baoshi.visible = true;\r\n                this.frame.visible = true;\r\n                this.ui.checkTimes(0);\r\n            });\r\n        }\r\n        setAD() {\r\n            this.isAD = true;\r\n            this.box.skin = \"Game/UI/TreasureNew/baoxiang_shipin.png\";\r\n        }\r\n    }\r\n    _Test.TreasureItem = TreasureItem;\r\n    _Test.boxOpenCount = 0;\r\n    _Test.leftTimes = 3;\r\n    _Test.ADBntTime = 0;\r\n    class Test extends Admin._SceneBase {\r\n        constructor() {\r\n            super(...arguments);\r\n            this.itemList = [];\r\n            this.settleFixY = 260;\r\n            this.needShowAD = [[1, 2, 6], [2, 6, 7], [3, 5, 6], [2, 4, 7], [0, 5, 7]];\r\n        }\r\n        lwgOnAwake() {\r\n            _Gold.goldAppear(100);\r\n            _Test.boxOpenCount = 0;\r\n            _Test.leftTimes = 3;\r\n            _Test.ADBntTime = 0;\r\n            this.getKeyValid = true;\r\n            this.quitValid = true;\r\n            this.showAD = [-1, -1, -1];\r\n            this.showAD = this.needShowAD[TweenMgr.randomInRange_iWithOutY(0, this.needShowAD.length)];\r\n            for (let i = 0; i < 9; i++) {\r\n                let c = \"Card\" + i;\r\n                let item = new TreasureItem(i, this.ImgVar(c), this);\r\n                this.itemList.push(item);\r\n                this.btnEv(c, () => {\r\n                    item.clickItem();\r\n                });\r\n                if (this.showAD.indexOf(i) >= 0) {\r\n                    item.setAD();\r\n                }\r\n            }\r\n            _Test.BSjihui = this.ImgVar(\"BSjihui\");\r\n            _Test.BS30 = this.ImgVar(\"30\");\r\n            _Test.BS50 = this.ImgVar(\"50\");\r\n            _Test.BS100 = this.ImgVar(\"100\");\r\n            if (_Game._ColoursPencils._switch != true) {\r\n                _Test.BSjihui.visible = true;\r\n                _Test.BS30.visible = true;\r\n            }\r\n            this.ImgVar(\"BtnMoreKey\").visible = false;\r\n            this.ImgVar(\"BtnDirect\").visible = false;\r\n            ADManager.TAPoint(TaT.PageEnter, 'boxpage');\r\n            ADManager.TAPoint(TaT.BtnShow, 'ADrewardbox_box');\r\n        }\r\n        lwgBtnClick() {\r\n            Click._on(Click._Type.largen, this.btnVar(\"BtnMoreKey\"), this, null, null, (e) => {\r\n                if (_Test.ADBntTime >= 1) {\r\n                    Dialogue.createHint_Middle(`普通宝箱已开完哦！`);\r\n                }\r\n                else {\r\n                    ADManager.ShowReward(() => {\r\n                        _Test.ADBntTime++;\r\n                        this.ImgVar(\"BtnMoreKey\").visible = false;\r\n                        this.ImgVar(\"BtnDirect\").visible = false;\r\n                        this.getKeyValid = false;\r\n                        this.checkTimes(3);\r\n                        ADManager.TAPoint(TaT.BtnClick, 'ADrewardbt_box');\r\n                    });\r\n                }\r\n            });\r\n            Click._on(Click._Type.largen, this.btnVar('BtnDirect'), this, null, null, (e) => {\r\n                this.lwgOpenScene(_SceneName.Share);\r\n            });\r\n        }\r\n        checkTimes(delta) {\r\n            _Test.leftTimes += delta;\r\n            if (_Test.leftTimes == 0) {\r\n                if (_Test.boxOpenCount == 9) {\r\n                    this.ImgVar(\"BtnMoreKey\").visible = false;\r\n                    this.ImgVar(\"BtnDirect\").visible = true;\r\n                }\r\n                else {\r\n                    this.ImgVar(\"BtnMoreKey\").visible = true;\r\n                    this.ImgVar(\"BtnDirect\").visible = true;\r\n                    ADManager.TAPoint(TaT.BtnShow, 'ADrewardbt_box');\r\n                }\r\n            }\r\n        }\r\n        bofang() {\r\n            Animation2D.bomb_LeftRight(this.ImgVar('BtnStart'), 1.22, 250);\r\n        }\r\n        lwgOnDisable() {\r\n            ADManager.TAPoint(TaT.PageLeave, 'boxpage');\r\n        }\r\n    }\r\n    Test.isFirst = true;\r\n    _Test.Test = Test;\r\n})(_Test || (_Test = {}));\r\nexport default _Test.Test;\r\n",
  "references": [
    "C:/Users/tomato/Desktop/Drawing_2.5.0/src/script/TJ/Admanager.ts",
    "C:/Users/tomato/Desktop/Drawing_2.5.0/src/script/Frame/Lwg.ts",
    "C:/Users/tomato/Desktop/Drawing_2.5.0/src/script/Frame/TweenMgr.ts",
    "C:/Users/tomato/Desktop/Drawing_2.5.0/src/script/Frame/_Game.ts"
  ]
}
