{
  "code": "import { Admin, Animation2D, EventAdmin, TimerAdmin, Tools, _SceneName } from \"./Lwg\";\r\nexport var _Guide;\r\n(function (_Guide) {\r\n    _Guide._complete = {\r\n        get bool() {\r\n            if (Laya.LocalStorage.getItem('_Guide_complete')) {\r\n                if (Number(Laya.LocalStorage.getItem('_Guide_complete')) == 0) {\r\n                    return false;\r\n                }\r\n                else {\r\n                    return true;\r\n                }\r\n            }\r\n            else {\r\n                return false;\r\n            }\r\n        },\r\n        set bool(bol) {\r\n            if (bol == true) {\r\n                bol = 1;\r\n            }\r\n            Laya.LocalStorage.setItem('_Guide_complete', bol.toString());\r\n        }\r\n    };\r\n    _Guide._whichStep = {\r\n        get num() {\r\n            return Laya.LocalStorage.getItem('_Guide_whichStep') ? Number(Laya.LocalStorage.getItem('_Guide_whichStep')) : 1;\r\n        },\r\n        set num(num0) {\r\n            Laya.LocalStorage.setItem('_Guide_whichStep', num0.toString());\r\n        }\r\n    };\r\n    _Guide._whichStepNum = 1;\r\n    let _Event;\r\n    (function (_Event) {\r\n        _Event[\"onStep\"] = \"_Guide_onStep\";\r\n        _Event[\"stepComplete\"] = \"_Guide_stepComplete\";\r\n        _Event[\"appear\"] = \"_Guide_appear\";\r\n        _Event[\"start\"] = \"_Guide_start\";\r\n        _Event[\"complete\"] = \"_Guide_complete\";\r\n    })(_Event = _Guide._Event || (_Guide._Event = {}));\r\n    function _init() {\r\n        console.log('开始进行新手引导！');\r\n        Admin._openScene(_SceneName.Start, null, () => {\r\n            console.log('新手引导完成！');\r\n        });\r\n    }\r\n    _Guide._init = _init;\r\n    class _GuideBase extends Admin._Scene {\r\n        moduleOnAwake() { }\r\n        moduleOnEnable() { }\r\n        moduleEventRegister() { }\r\n    }\r\n    _Guide._GuideBase = _GuideBase;\r\n    class Guide extends _Guide._GuideBase {\r\n        lwgOnEnable() {\r\n            this.Owner['Background'].alpha = 0;\r\n            this.Owner['Hand'].alpha = 0;\r\n            EventAdmin._notify(_Guide._Event.onStep);\r\n            this.Owner[\"Draw\"].on(Laya.Event.LABEL, this, (labal) => {\r\n                if (labal === 'start') {\r\n                    let DrawCanvas = this.Owner['Hand'].getChildByName('DrawCanvas');\r\n                    if (!DrawCanvas) {\r\n                        let DrawCanvas = new Laya.Sprite();\r\n                        DrawCanvas.name = 'DrawCanvas';\r\n                        this.Owner['Hand'].addChild(DrawCanvas);\r\n                        this.Owner['Handpic'].pos(0, 0);\r\n                        this.Owner['Handpic'].pivotX = 0;\r\n                        this.Owner['Handpic'].pivotY = 0;\r\n                        this['drawLinePos'] = new Laya.Point(this.Owner['Handpic'].x, this.Owner['Handpic'].y);\r\n                    }\r\n                }\r\n                else if (labal === 'end') {\r\n                    let DrawCanvas = this.Owner['Hand'].getChildByName('DrawCanvas');\r\n                    if (this.Owner['Hand'].getChildByName('DrawCanvas')) {\r\n                        this['drawLinePos'] == false;\r\n                        DrawCanvas.removeSelf();\r\n                    }\r\n                }\r\n            });\r\n            TimerAdmin._frameLoop(1, this, () => {\r\n                let DrawCanvas = this.Owner['Hand'].getChildByName('DrawCanvas');\r\n                if (DrawCanvas) {\r\n                    if (this['drawLinePos']) {\r\n                        DrawCanvas.graphics.drawLine(this['drawLinePos'].x, this['drawLinePos'].y, this.Owner['Handpic'].x, this.Owner['Handpic'].y, \"#000000\", 8);\r\n                        DrawCanvas.graphics.drawCircle(this.Owner['Handpic'].x, this.Owner['Handpic'].y, 4, \"#000000\");\r\n                        this['drawLinePos'] = new Laya.Point(this.Owner['Handpic'].x, this.Owner['Handpic'].y);\r\n                    }\r\n                }\r\n            });\r\n        }\r\n        lwgEventRegister() {\r\n            var step1 = () => {\r\n                this.Owner[\"Draw\"].play(0, true);\r\n                EventAdmin._notify(_Guide._Event.appear);\r\n                this.Owner['Hand'].pos(198, 523);\r\n                Tools.Draw.reverseRoundMask(this.Owner['Background'], 360, 598, 350, true);\r\n            };\r\n            var step2 = () => {\r\n                EventAdmin._notify(_Guide._Event.appear);\r\n                this.Owner['Hand'].pos(360, 1161);\r\n                this.Owner[\"Click\"].play(0, true);\r\n                Tools.Draw.reverseRoundrectMask(this.Owner['Background'], 360, 1161, 320, 150, 40, true);\r\n            };\r\n            var step3 = () => {\r\n                step1();\r\n            };\r\n            var step4 = () => {\r\n                step2();\r\n            };\r\n            var step5 = () => {\r\n                EventAdmin._notify(_Guide._Event.appear);\r\n                this.Owner['Hand'].pos(75, 102);\r\n                this.Owner[\"Click\"].play(0, true);\r\n                Tools.Draw.reverseRoundMask(this.Owner['Background'], 72, 105, 60);\r\n            };\r\n            var step6 = () => {\r\n                EventAdmin._notify(_Guide._Event.appear);\r\n                this.Owner['Hand'].pos(630, 790);\r\n                this.Owner[\"Click\"].play(0, true);\r\n                Tools.Draw.reverseRoundrectMask(this.Owner['Background'], 653, 758, 130, 150, 20, true);\r\n            };\r\n            var step7 = () => {\r\n                step5();\r\n            };\r\n            var step8 = () => {\r\n                EventAdmin._notify(_Guide._Event.appear);\r\n                this.Owner['Hand'].pos(360, Laya.stage.height * 0.779);\r\n                this.Owner[\"Click\"].play(0, true);\r\n                Tools.Draw.reverseRoundrectMask(this.Owner['Background'], 360, Laya.stage.height * 0.779, 450, 180, 20, true);\r\n            };\r\n            EventAdmin._register(_Guide._Event.onStep, this, () => {\r\n                Laya.timer.once(500, this, () => {\r\n                    console.log('新手引导到了第：', _Guide._whichStepNum + '步了');\r\n                    switch (_Guide._whichStepNum) {\r\n                        case 1:\r\n                            step1();\r\n                            break;\r\n                        case 2:\r\n                            step2();\r\n                            break;\r\n                        case 3:\r\n                            step3();\r\n                            break;\r\n                        case 4:\r\n                            step4();\r\n                            break;\r\n                        case 5:\r\n                            step5();\r\n                            break;\r\n                        case 6:\r\n                            step6();\r\n                            break;\r\n                        case 7:\r\n                            step7();\r\n                            break;\r\n                        case 8:\r\n                            step8();\r\n                            break;\r\n                        default:\r\n                            break;\r\n                    }\r\n                });\r\n            });\r\n            EventAdmin._register(_Guide._Event.appear, this, (func) => {\r\n                Animation2D.fadeOut(this.Owner['Hand'], 0, 1, 150);\r\n                Animation2D.fadeOut(this.Owner['Background'], 0, 0.5, 300);\r\n            });\r\n            EventAdmin._register(_Guide._Event.stepComplete, this, () => {\r\n                _Guide._whichStepNum++;\r\n                let DrawCanvas = this.Owner['Hand'].getChildByName('DrawCanvas');\r\n                if (this.Owner['Hand'].getChildByName('DrawCanvas')) {\r\n                    this['drawLinePos'] == false;\r\n                    DrawCanvas.removeSelf();\r\n                }\r\n                Animation2D.fadeOut(this.Owner['Hand'], 1, 0, 150);\r\n                Animation2D.fadeOut(this.Owner['Background'], 0.5, 0, 300, 0, () => {\r\n                    this.Owner[\"Draw\"].stop();\r\n                    this.Owner[\"Click\"].stop();\r\n                });\r\n            });\r\n            EventAdmin._register(_Guide._Event.complete, this, () => {\r\n                Animation2D.fadeOut(this.Owner['Hand'], 1, 0, 150);\r\n                Animation2D.fadeOut(this.Owner['Background'], 0.5, 0, 300, 0, () => {\r\n                    _Guide._complete.bool = true;\r\n                    Admin._closeScene(this.Owner.name);\r\n                });\r\n            });\r\n        }\r\n    }\r\n    _Guide.Guide = Guide;\r\n})(_Guide || (_Guide = {}));\r\nexport default _Guide.Guide;\r\n",
  "references": [
    "D:/Game/project/Drawing/Project_2.5.0/Drawing_2.5.0/src/script/Frame/Lwg.ts"
  ]
}
