{
  "code": "import ADManager from \"../TJ/Admanager\";\r\nimport { Admin, Click, _Gold } from \"./Lwg\";\r\nimport TweenMgr from \"./TweenMgr\";\r\nimport { _Game } from \"./_Game\";\r\nexport var _Test;\r\n(function (_Test) {\r\n    class TreasureItem {\r\n        constructor(id, obj, ui) {\r\n            this._range = [];\r\n            this.isAD = false;\r\n            this.id = id;\r\n            this.ui = ui;\r\n            let baoshi = obj.getChildByName(\"baoshi\");\r\n            this.baoshi = baoshi;\r\n            let frame = obj.getChildByName(\"Frame\");\r\n            this.box = obj.getChildByName(\"Box\");\r\n            this.box.skin = \"Game/UI/TreasureNew/baoxiang.png\";\r\n            this.frame = frame;\r\n            this.num = frame.getChildByName(\"Num\");\r\n            this.g1 = frame.getChildByName(\"G1\");\r\n            this.g2 = frame.getChildByName(\"G2\");\r\n            this._close = true;\r\n            this._gold = TweenMgr.randomInRange_i(5, 10);\r\n            let ox = obj.x;\r\n            let oy = obj.y;\r\n            let offset = 40;\r\n            this._range = [oy - offset, oy + offset, ox - offset, ox + offset];\r\n            this.baoshi.visible = false;\r\n            this.frame.visible = false;\r\n            this.num.value = this._gold.toString();\r\n            if (this._gold < 7) {\r\n                this.g2.visible = false;\r\n                this.g1.x = 47;\r\n            }\r\n        }\r\n        clickItem() {\r\n            if (this._close && _Test.leftTimes > 0) {\r\n                if (this.isAD) {\r\n                    let self = this;\r\n                    ADManager.ShowReward(() => {\r\n                        this.ClickBox();\r\n                    }, null);\r\n                }\r\n                else {\r\n                    this.ClickBox();\r\n                }\r\n            }\r\n        }\r\n        ClickBox() {\r\n            console.log(\"点击宝箱\");\r\n            _Test.leftTimes -= 1;\r\n            _Test.boxOpenCount++;\r\n            console.log(\"点击宝箱\", _Test.boxOpenCount);\r\n            if (_Test.boxOpenCount == 9) {\r\n                if (_Game._BlinkPencils._randomNoHaveOne() != null) {\r\n                    this.openshow2();\r\n                    return;\r\n                }\r\n            }\r\n            this._close = false;\r\n            _Gold._getGoldAni_Heap(Laya.stage, 15, 55, 51, `Game/UI/Victory/jb.png`, null, null, null, () => {\r\n                _Gold._addGold(this._gold);\r\n            });\r\n            this.frame.visible = true;\r\n            this.ui.checkTimes(0);\r\n        }\r\n        openshow2() {\r\n            this.g1.visible = false;\r\n            this.g2.visible = false;\r\n            this.num.visible = false;\r\n            this.baoshi.visible = true;\r\n            this.frame.visible = true;\r\n            this.ui.checkTimes(0);\r\n        }\r\n        setAD() {\r\n            this.isAD = true;\r\n            this.box.skin = \"Game/UI/TreasureNew/baoxiang_shipin.png\";\r\n        }\r\n    }\r\n    _Test.TreasureItem = TreasureItem;\r\n    _Test.boxOpenCount = 0;\r\n    _Test.leftTimes = 3;\r\n    class Test extends Admin._SceneBase {\r\n        constructor() {\r\n            super(...arguments);\r\n            this.itemList = [];\r\n            this.settleFixY = 260;\r\n            this.needShowAD = [[1, 2, 6], [2, 6, 7], [3, 5, 6], [2, 4, 7], [0, 5, 7]];\r\n            this.isFirst = true;\r\n            this.isAttach = false;\r\n        }\r\n        lwgOnAwake() {\r\n            _Test.boxOpenCount = 0;\r\n            _Test.leftTimes = 3;\r\n            this.leftScd = 4;\r\n            this.getKeyValid = true;\r\n            this.quitValid = true;\r\n            let showAD = [-1, -1, -1];\r\n            if (!this.isAttach) {\r\n                if (this.isFirst) {\r\n                    this.isFirst = false;\r\n                }\r\n                else {\r\n                    showAD = this.needShowAD[TweenMgr.randomInRange_iWithOutY(0, this.needShowAD.length)];\r\n                }\r\n            }\r\n            else {\r\n                showAD = this.needShowAD[TweenMgr.randomInRange_iWithOutY(0, this.needShowAD.length)];\r\n            }\r\n            for (let i = 0; i < 9; i++) {\r\n                let c = \"Card\" + i;\r\n                let item = new TreasureItem(i, this.ImgVar(c), this);\r\n                this.itemList.push(item);\r\n                this.btnEv(c, () => {\r\n                    item.clickItem();\r\n                });\r\n            }\r\n            this.ImgVar(\"BtnMoreKey\").visible = false;\r\n            this.ImgVar(\"BtnDirect\").visible = false;\r\n        }\r\n        lwgBtnClick() {\r\n            Click._on(Click._Type.largen, this.ImgVar(\"BtnMoreKey\"), this, null, null, (e) => {\r\n                ADManager.ShowReward(() => {\r\n                    this.ImgVar(\"BtnMoreKey\").visible = false;\r\n                    this.ImgVar(\"BtnDirect\").visible = false;\r\n                    this.getKeyValid = false;\r\n                    this.checkTimes(3);\r\n                });\r\n            });\r\n            Click._on(Click._Type.largen, this.btnVar('BtnDirect'), this, null, null, (e) => {\r\n                this.lwgCloseScene();\r\n                this.lwgOpenScene('Victory');\r\n            });\r\n        }\r\n        checkTimes(delta) {\r\n            _Test.leftTimes += delta;\r\n            if (_Test.leftTimes == 0) {\r\n                if (_Test.boxOpenCount == 9) {\r\n                    this.ImgVar(\"BtnMoreKey\").visible = false;\r\n                    this.ImgVar(\"BtnDirect\").visible = true;\r\n                }\r\n                else {\r\n                    this.ImgVar(\"BtnMoreKey\").visible = true;\r\n                    this.ImgVar(\"BtnDirect\").visible = true;\r\n                }\r\n            }\r\n        }\r\n    }\r\n    _Test.Test = Test;\r\n})(_Test || (_Test = {}));\r\nexport default _Test.Test;\r\n",
  "references": [
    "C:/Users/tomato/Desktop/Drawing_2.5.0/src/script/TJ/Admanager.ts",
    "C:/Users/tomato/Desktop/Drawing_2.5.0/src/script/Frame/Lwg.ts",
    "C:/Users/tomato/Desktop/Drawing_2.5.0/src/script/Frame/TweenMgr.ts",
    "C:/Users/tomato/Desktop/Drawing_2.5.0/src/script/Frame/_Game.ts"
  ]
}
