{
  "code": "import ADManager, { TaT } from \"../TJ/Admanager\";\r\nimport { Admin, Click, _Gold, Tools, Dialogue, _SceneName, EventAdmin } from \"./Lwg\";\r\nimport { _Execution } from \"./_Execution\";\r\nimport { _PreloadUrl } from \"./_PreLoad\";\r\nimport { _PropTry } from \"./_PropTry\";\r\nexport var _SelectLevel;\r\n(function (_SelectLevel) {\r\n    class _Data {\r\n        static _getClassifyArr(classify) {\r\n            let _arr = [];\r\n            for (const key in this._arr) {\r\n                if (Object.prototype.hasOwnProperty.call(this._arr, key)) {\r\n                    const element = this._arr[key];\r\n                    if (element[this._property.classify] == classify) {\r\n                        _arr.push(element);\r\n                    }\r\n                }\r\n            }\r\n            return _arr;\r\n        }\r\n        ;\r\n        static get _arr() {\r\n            if (!this['_SelectLevel_Data3']) {\r\n                this['_SelectLevel_Data3'] = Tools.jsonCompare(_PreloadUrl._list.json.SelectLevel1.url, '_SelectLevel_Data3', _Data._property.name);\r\n            }\r\n            return this['_SelectLevel_Data3'];\r\n        }\r\n        ;\r\n        static set _arr(array) {\r\n            this['_SelectLevel_Data3'] = array;\r\n        }\r\n        ;\r\n        static _getUnlockByName(name) {\r\n            let bool;\r\n            for (const key in this._arr) {\r\n                if (Object.prototype.hasOwnProperty.call(this._arr, key)) {\r\n                    const element = this._arr[key];\r\n                    if (element[this._property.name] == name) {\r\n                        bool = element[this._property.unlock];\r\n                        break;\r\n                    }\r\n                }\r\n                return bool;\r\n            }\r\n        }\r\n        ;\r\n        static _getProperty(name, pro) {\r\n            let value;\r\n            for (const key in this._arr) {\r\n                if (Object.prototype.hasOwnProperty.call(this._arr, key)) {\r\n                    const element = this._arr[key];\r\n                    if (element[this._property.name] == name) {\r\n                        value = element[pro];\r\n                        break;\r\n                    }\r\n                }\r\n            }\r\n            return value;\r\n        }\r\n        ;\r\n        static _setProperty(name, pro, value) {\r\n            for (const key in this._arr) {\r\n                if (Object.prototype.hasOwnProperty.call(this._arr, key)) {\r\n                    const element = this._arr[key];\r\n                    if (element[this._property.name] == name) {\r\n                        element[pro] = value;\r\n                        _SelectLevel._MyList.refresh();\r\n                        Laya.LocalStorage.setJSON('_SelectLevel_Data3', JSON.stringify(this._arr));\r\n                        break;\r\n                    }\r\n                }\r\n            }\r\n            return value;\r\n        }\r\n        ;\r\n        static _setHaveBeenDrawn(imgSkin, name) {\r\n            for (const key in this._arr) {\r\n                if (Object.prototype.hasOwnProperty.call(this._arr, key)) {\r\n                    const element = this._arr[key];\r\n                    name = name ? name : this._pich.customs;\r\n                    if (element[this._property.name] == name) {\r\n                        element[this._property.haveBeenDrawn] = imgSkin;\r\n                        Laya.LocalStorage.setJSON('_SelectLevel_Data3', JSON.stringify(this._arr));\r\n                    }\r\n                }\r\n            }\r\n        }\r\n    }\r\n    _Data._property = {\r\n        name: 'name',\r\n        chName: 'chName',\r\n        classify: 'classify',\r\n        unlockWay: 'unlockWay',\r\n        condition: 'condition',\r\n        resCondition: 'resCondition',\r\n        unlock: 'unlock',\r\n        haveBeenDrawn: 'haveBeenDrawn',\r\n    };\r\n    _Data._classify = {\r\n        limit: 'limit',\r\n        animal: 'animal',\r\n        botany: 'botany',\r\n        other: 'other',\r\n    };\r\n    _Data._pich = {\r\n        get classify() {\r\n            return this['_SelectLevel_pichclassify'] ? this['_SelectLevel_pichclassify'] : 'animal';\r\n        },\r\n        set classify(str) {\r\n            if (_SelectLevel._MyList) {\r\n                _SelectLevel._MyList.array = _Data._getClassifyArr(str);\r\n                _SelectLevel._MyList.refresh();\r\n            }\r\n            this['_SelectLevel_pichclassify'] = str;\r\n        },\r\n        get customs() {\r\n            return Laya.LocalStorage.getItem('_SelectLevel_pichcustoms') ? Laya.LocalStorage.getItem('_SelectLevel_pichcustoms') : null;\r\n        },\r\n        set customs(str) {\r\n            _SelectLevel._MyList.array = _Data._getClassifyArr(str);\r\n            _SelectLevel._MyList.refresh();\r\n            Laya.LocalStorage.setItem('_SelectLevel_pichcustoms', str.toString());\r\n        }\r\n    };\r\n    _Data._unlockWay = {\r\n        free: 'free',\r\n        gold: 'gold',\r\n        ads: 'ads',\r\n    };\r\n    _SelectLevel._Data = _Data;\r\n    let _Event;\r\n    (function (_Event) {\r\n        _Event[\"_SelectLevel_Close\"] = \"_SelectLevel_Close\";\r\n        _Event[\"_OpenTiliBuC\"] = \"_OpenTiliBuC\";\r\n        _Event[\"_OpenTiliBuC2\"] = \"_OpenTiliBuC2\";\r\n    })(_Event = _SelectLevel._Event || (_SelectLevel._Event = {}));\r\n    function _init() {\r\n    }\r\n    _SelectLevel._init = _init;\r\n    class _SelectLevelItem extends Admin._Object {\r\n        lwgOnEnable() {\r\n            ADManager.TAPoint(TaT.BtnShow, 'ADrewardbt_choosecard');\r\n        }\r\n        lwgBtnClick() {\r\n            let BtnContent = this.Owner.getChildByName('Content').getChildByName('BtnContent');\r\n            Click._on(Click._Type.largen, BtnContent, this, null, null, () => {\r\n                if (!this.owner['_dataSource'][_Data._property.unlock]) {\r\n                    switch (this.owner['_dataSource'][_Data._property.unlockWay]) {\r\n                        case _Data._unlockWay.ads:\r\n                            ADManager.ShowReward(() => {\r\n                                ADManager.TAPoint(TaT.BtnClick, 'ADrewardbt_choosecard');\r\n                                _Data._setProperty(this.Owner['_dataSource'][_Data._property.name], _Data._property.unlock, true);\r\n                            });\r\n                            break;\r\n                        case _Data._unlockWay.gold:\r\n                            let num = this.owner['_dataSource'][_Data._property.condition];\r\n                            if (_Gold._num.value >= num) {\r\n                                _Data._setProperty(this.Owner['_dataSource'][_Data._property.name], _Data._property.unlock, true);\r\n                                _Gold._num.value -= num;\r\n                            }\r\n                            else {\r\n                                Dialogue.createHint_Middle('金币不够了！');\r\n                            }\r\n                            break;\r\n                        default:\r\n                            break;\r\n                    }\r\n                }\r\n                else {\r\n                    if (_Execution._execution.value >= 2) {\r\n                        EventAdmin._notify(_SelectLevel._Event._OpenTiliBuC);\r\n                        EventAdmin._register(_Event._OpenTiliBuC2, this, () => {\r\n                            if (this.Owner['_dataSource'][_Data._property.chName] === \"乌龟\" || this.Owner['_dataSource'][_Data._property.chName] === \"小红花\" || this.Owner['_dataSource'][_Data._property.chName] === \"小汽车\") {\r\n                                _SelectLevel._Data._pich.customs = this.Owner['_dataSource'][_SelectLevel._Data._property.name];\r\n                                Admin._sceneAnimation.presentAni = Admin._sceneAnimation.type.stickIn.random;\r\n                                this.lwgOpenScene(_SceneName.PropTry, false);\r\n                            }\r\n                            else {\r\n                                _Data._setProperty(this.Owner['_dataSource'][_Data._property.name], _Data._property.unlock, false);\r\n                                _SelectLevel._Data._pich.customs = this.Owner['_dataSource'][_SelectLevel._Data._property.name];\r\n                                Admin._sceneAnimation.presentAni = Admin._sceneAnimation.type.stickIn.random;\r\n                                this.lwgOpenScene(_SceneName.PropTry, false);\r\n                            }\r\n                        });\r\n                    }\r\n                    else {\r\n                        this.lwgOpenScene(\"TiliFou\", false);\r\n                    }\r\n                }\r\n                _SelectLevel._MyList.refresh();\r\n            });\r\n            let ADjiesuo = this.Owner.getChildByName('Content').getChildByName('ADjiesuo');\r\n            Click._on(Click._Type.noEffect, ADjiesuo, this, null, null, () => {\r\n                if (!this.owner['_dataSource'][_Data._property.unlock]) {\r\n                    switch (this.owner['_dataSource'][_Data._property.unlockWay]) {\r\n                        case _Data._unlockWay.ads:\r\n                            ADManager.ShowReward(() => {\r\n                                ADManager.TAPoint(TaT.BtnClick, 'ADrewardbt_choosecard');\r\n                                _Data._setProperty(this.Owner['_dataSource'][_Data._property.name], _Data._property.unlock, true);\r\n                            });\r\n                            break;\r\n                        case _Data._unlockWay.gold:\r\n                            ADManager.ShowReward(() => {\r\n                                ADManager.TAPoint(TaT.BtnClick, 'ADrewardbt_choosecard');\r\n                                _Data._setProperty(this.Owner['_dataSource'][_Data._property.name], _Data._property.unlock, true);\r\n                            });\r\n                            break;\r\n                        default:\r\n                            break;\r\n                    }\r\n                }\r\n                _SelectLevel._MyList.refresh();\r\n            });\r\n        }\r\n    }\r\n    _SelectLevel._SelectLevelItem = _SelectLevelItem;\r\n    class SelectLevelBase extends Admin._SceneBase {\r\n        moduleOnAwake() {\r\n            ADManager.TAPoint(TaT.PageShow, 'choosecardpage');\r\n            _SelectLevel._MyList = this.ListVar('MyList');\r\n            _SelectLevel._MyList.array = _Data._getClassifyArr(_Data._pich.classify);\r\n            _SelectLevel._MyList.selectEnable = true;\r\n            _SelectLevel._MyList.vScrollBarSkin = \"\";\r\n            _SelectLevel._MyList.selectHandler = new Laya.Handler(this, (index) => { });\r\n            _SelectLevel._MyList.renderHandler = new Laya.Handler(this, (cell, index) => {\r\n                let _dataSource = cell.dataSource;\r\n                let Content = cell.getChildByName('Content');\r\n                let BtnContent = Content.getChildByName('BtnContent');\r\n                let ADjiesuo = Content.getChildByName('ADjiesuo');\r\n                let Name = BtnContent.getChildByName('Name');\r\n                Name.skin = `Game/UI/SelectLevel/Name/${_dataSource[_Data._property.name]}.png`;\r\n                let Xianlu = Content.getChildByName('Xianlu');\r\n                let IconPen = Content.getChildByName('IconPen');\r\n                if (index % 3 == 0) {\r\n                    IconPen.skin = `Game/UI/SelectLevel/IconDress/bi.png`;\r\n                }\r\n                else if (index % 2 == 0) {\r\n                    IconPen.skin = `Game/UI/SelectLevel/IconDress/bz.png`;\r\n                }\r\n                else {\r\n                    IconPen.skin = `Game/UI/SelectLevel/IconDress/shu.png`;\r\n                }\r\n                if (index % 2 !== 0) {\r\n                    Content.pos(27, 8);\r\n                    Xianlu.pos(104, 189);\r\n                    Xianlu.skin = `Game/UI/SelectLevel/xianlu2.png`;\r\n                    IconPen.scaleX = 1;\r\n                    IconPen.pos(350, 180);\r\n                }\r\n                else {\r\n                    Content.pos(363, 10);\r\n                    Xianlu.pos(-140, 170);\r\n                    Xianlu.skin = `Game/UI/SelectLevel/xianlu1.png`;\r\n                    IconPen.scaleX = -1;\r\n                    IconPen.pos(-31, 195);\r\n                }\r\n                let IconAds = BtnContent.getChildByName('IconAds');\r\n                let IconLock = BtnContent.getChildByName('IconLock');\r\n                let GoldNum = BtnContent.getChildByName('GoldNum');\r\n                let GoldBoard = BtnContent.getChildByName('GoldBoard');\r\n                if (!_dataSource[_Data._property.unlock]) {\r\n                    switch (_dataSource[_Data._property.unlockWay]) {\r\n                        case _Data._unlockWay.ads:\r\n                            GoldBoard.visible = GoldNum.visible = false;\r\n                            IconAds.visible = true;\r\n                            ADjiesuo.visible = false;\r\n                            break;\r\n                        case _Data._unlockWay.free:\r\n                            GoldBoard.visible = GoldNum.visible = false;\r\n                            IconAds.visible = false;\r\n                            ADjiesuo.visible = false;\r\n                            break;\r\n                        case _Data._unlockWay.gold:\r\n                            GoldNum.text = _dataSource[_Data._property.condition];\r\n                            GoldBoard.visible = GoldNum.visible = true;\r\n                            IconAds.visible = false;\r\n                            if (_dataSource[_Data._property.chName] === \"丁老太\") {\r\n                                ADjiesuo.visible = false;\r\n                            }\r\n                            else {\r\n                                ADjiesuo.visible = true;\r\n                            }\r\n                            break;\r\n                        default:\r\n                            break;\r\n                    }\r\n                    IconLock.skin = `Game/UI/SelectLevel/suo.png`;\r\n                    IconLock.pos(143, 107);\r\n                }\r\n                else {\r\n                    IconAds.visible = false;\r\n                    GoldNum.visible = false;\r\n                    GoldBoard.visible = false;\r\n                    ADjiesuo.visible = false;\r\n                    IconLock.skin = `Game/UI/SelectLevel/icon_can.png`;\r\n                    IconLock.pos(143, 127);\r\n                }\r\n                let Board2 = BtnContent.getChildByName('Board2');\r\n                let Pic = Board2.getChildByName('Pic');\r\n                if (_dataSource[_Data._property.haveBeenDrawn]) {\r\n                    Pic.skin = _dataSource[_Data._property.haveBeenDrawn];\r\n                    IconLock.visible = false;\r\n                    Board2.skin = `Game/UI/SelectLevel/yuan1.png`;\r\n                }\r\n                else {\r\n                    Pic.skin = null;\r\n                    IconLock.visible = true;\r\n                    Board2.skin = `Game/UI/SelectLevel/yuan.png`;\r\n                }\r\n                if (index == _SelectLevel._MyList.array.length - 1) {\r\n                    IconPen.visible = Xianlu.visible = false;\r\n                }\r\n                else {\r\n                    IconPen.visible = Xianlu.visible = true;\r\n                }\r\n                cell.zOrder = index;\r\n            });\r\n        }\r\n    }\r\n    _SelectLevel.SelectLevelBase = SelectLevelBase;\r\n    class SelectLevel extends _SelectLevel.SelectLevelBase {\r\n        lwgOnAwake() {\r\n            console.log(_Data._pich.classify);\r\n            _PropTry._comeFrom = _SceneName.SelectLevel;\r\n            for (let index = 0; index < this.ImgVar('CutBtn').numChildren; index++) {\r\n                const element = this.ImgVar('CutBtn').getChildAt(index);\r\n                if (element.name == _Data._pich.classify) {\r\n                    element.y = 11;\r\n                }\r\n                else {\r\n                    element.y = 69;\r\n                }\r\n            }\r\n        }\r\n        lwgAdaptive() {\r\n            this.ImgVar('UiLand').y = Laya.stage.height - 74;\r\n            this.ImgVar('BtnBack').y = Laya.stage.height - 80;\r\n            this.ListVar('MyList').height = Laya.stage.height - 320;\r\n        }\r\n        lwgEventRegister() {\r\n            EventAdmin._register(_Event._SelectLevel_Close, this, () => {\r\n                this.lwgCloseScene();\r\n            });\r\n            EventAdmin._register(_Event._OpenTiliBuC, this, () => {\r\n                this.ImgVar('TiliTishi').visible = true;\r\n            });\r\n        }\r\n        lwgBtnClick() {\r\n            Click._on(Click._Type.largen, this.ImgVar('BtnBack'), this, null, null, () => {\r\n                this.lwgOpenScene(_SceneName.Start);\r\n            });\r\n            if (_SelectLevel._MyList.cells.length !== 0) {\r\n                for (let index = 0; index < _SelectLevel._MyList.cells.length; index++) {\r\n                    const element = _SelectLevel._MyList.cells[index];\r\n                    if (!element.getComponent(_SelectLevelItem)) {\r\n                        element.addComponent(_SelectLevelItem);\r\n                    }\r\n                }\r\n            }\r\n            for (let index = 0; index < this.ImgVar('CutBtn').numChildren; index++) {\r\n                const element = this.ImgVar('CutBtn').getChildAt(index);\r\n                if (element.name == _Data._pich.classify) {\r\n                    element.y = 11;\r\n                }\r\n                else {\r\n                    element.y = 69;\r\n                }\r\n                Click._on(Click._Type.largen, element, this, null, null, (e) => {\r\n                    for (let index = 0; index < this.ImgVar('CutBtn').numChildren; index++) {\r\n                        const Btn = this.ImgVar('CutBtn').getChildAt(index);\r\n                        if (Btn == e.currentTarget) {\r\n                            Btn.y = 35;\r\n                            _Data._pich.classify = Btn.name;\r\n                        }\r\n                        else {\r\n                            Btn.y = 69;\r\n                        }\r\n                    }\r\n                });\r\n            }\r\n            Click._on(Click._Type.largen, this.ImgVar('SureQ'), this, null, null, () => {\r\n                ADManager.ShowReward(() => {\r\n                    EventAdmin._notify(_SelectLevel._Event._OpenTiliBuC2);\r\n                });\r\n            });\r\n            Click._on(Click._Type.largen, this.ImgVar('GuanQ'), this, null, null, () => {\r\n                _Execution._execution.value -= 2;\r\n                EventAdmin._notify(_SelectLevel._Event._OpenTiliBuC2);\r\n                Dialogue.createHint_Middle(`消耗2点体力`);\r\n            });\r\n        }\r\n        lwgOnDisable() {\r\n            ADManager.TAPoint(TaT.PageLeave, 'choosecardpage');\r\n        }\r\n    }\r\n    _SelectLevel.SelectLevel = SelectLevel;\r\n})(_SelectLevel || (_SelectLevel = {}));\r\nexport default _SelectLevel.SelectLevel;\r\n",
  "references": [
    "C:/Users/tomato/Desktop/Drawing_2.5.0/src/script/TJ/Admanager.ts",
    "C:/Users/tomato/Desktop/Drawing_2.5.0/src/script/Frame/Lwg.ts",
    "C:/Users/tomato/Desktop/Drawing_2.5.0/src/script/Frame/_Execution.ts",
    "C:/Users/tomato/Desktop/Drawing_2.5.0/src/script/Frame/_Game.ts",
    "C:/Users/tomato/Desktop/Drawing_2.5.0/src/script/Frame/_PreLoad.ts",
    "C:/Users/tomato/Desktop/Drawing_2.5.0/src/script/Frame/_PropTry.ts"
  ]
}
