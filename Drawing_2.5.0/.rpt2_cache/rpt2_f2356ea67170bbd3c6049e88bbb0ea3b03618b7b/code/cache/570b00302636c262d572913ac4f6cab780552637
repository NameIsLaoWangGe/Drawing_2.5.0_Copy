{
  "code": "import ADManager, { TaT } from \"../TJ/Admanager\";\r\nimport RecordManager from \"../TJ/RecordManager\";\r\nimport { Admin, Click, _Gold, _SceneName, EventAdmin, DateAdmin, PalyAudio } from \"./Lwg\";\r\nimport OldEffects from \"./OldEffects\";\r\nimport TweenMgr from \"./TweenMgr\";\r\nimport { _Game } from \"./_Game\";\r\nimport { _Share } from \"./_Share\";\r\nimport { _Special } from \"./_Special\";\r\nexport var _Victory;\r\n(function (_Victory) {\r\n    let _Event;\r\n    (function (_Event) {\r\n        _Event[\"_Settle_CloseScene\"] = \"_Settle_CloseScene\";\r\n    })(_Event = _Victory._Event || (_Victory._Event = {}));\r\n    function _init() {\r\n    }\r\n    _Victory._init = _init;\r\n    class VictoryBase extends Admin._SceneBase {\r\n        lwgOnAwake() {\r\n            ADManager.TAPoint(TaT.PageShow, 'endpage');\r\n            ADManager.TAPoint(TaT.BtnShow, 'ADrewardbt_end');\r\n            ADManager.TAPoint(TaT.BtnShow, 'close_end');\r\n        }\r\n    }\r\n    _Victory.VictoryBase = VictoryBase;\r\n    class Victory extends _Victory.VictoryBase {\r\n        lwgOnAwake() {\r\n            RecordManager.stopAutoRecord();\r\n            if (_Share._Data._photo._base64) {\r\n                this.ImgVar('Photo').skin = _Share._Data._photo._base64;\r\n                this.ImgVar('Photo').scale(0.75, 0.75);\r\n            }\r\n            if (_Game._ColoursPencils._switch && _Special._data._lastDate\r\n                !== DateAdmin._date.date) {\r\n                this.ImgVar('Evaluate').skin = 'Game/UI/Victory/sbml.png';\r\n            }\r\n            else {\r\n                if (_Game._GeneralPencils._pitchName == 'colours') {\r\n                    this.ImgVar('Evaluate').skin = 'Game/UI/Victory/jmjl.png';\r\n                }\r\n                else {\r\n                    this.ImgVar('Evaluate').skin = 'Game/UI/Victory/pptt.png';\r\n                }\r\n            }\r\n        }\r\n        HuiTan() {\r\n            let HuiShouYiNum = false;\r\n            HuiShouYiNum = Number(Laya.LocalStorage.getItem(\"HuiShouYiNum\")) != 0;\r\n            if (!HuiShouYiNum) {\r\n                let XZCJCount = Number(Laya.LocalStorage.getItem(\"XZCJCount\"));\r\n                let rate = TweenMgr.randomInRange_i(0, 100);\r\n                switch (XZCJCount) {\r\n                    case 0:\r\n                        this.lwgOpenScene(_SceneName.Special, false);\r\n                        break;\r\n                    default:\r\n                        if (rate < 50) {\r\n                            if (_Game._ColoursPencils._switch) {\r\n                                this.lwgOpenScene(_SceneName.Special, false);\r\n                            }\r\n                            else {\r\n                                this.lwgOpenScene(_SceneName.SpecialQ, false);\r\n                            }\r\n                            break;\r\n                        }\r\n                        else {\r\n                            if (_Game._ColoursPencils._switch) {\r\n                                this.lwgOpenScene(_SceneName.Special, false);\r\n                            }\r\n                            else {\r\n                                console.log(\"啥也没有\");\r\n                            }\r\n                            break;\r\n                        }\r\n                }\r\n                XZCJCount++;\r\n                Laya.LocalStorage.setItem(\"XZCJCount\", XZCJCount.toString());\r\n            }\r\n        }\r\n        lwgOpenAniAfter() {\r\n            this.AniVar('NoAni_Remark').play(0, false);\r\n            this.AniVar('NoAni_Remark').on(Laya.Event.LABEL, this, (e) => {\r\n                PalyAudio.playVictorySound();\r\n                OldEffects.createFireworks(Laya.stage, 40, 430, 200);\r\n                OldEffects.createFireworks(Laya.stage, 40, 109, 200);\r\n                OldEffects.createLeftOrRightJet(Laya.stage, 'right', 40, 720, 300);\r\n                OldEffects.createLeftOrRightJet(Laya.stage, 'left', 40, 0, 300);\r\n                console.log(_Game._GeneralPencils._pitchName, _Special._data._lastDate);\r\n                this.HuiTan();\r\n                if (_Game._ColoursPencils._switch && _Special._data._lastDate\r\n                    !== DateAdmin._date.date) {\r\n                    _Special._data._lastDate = DateAdmin._date.date;\r\n                    this.ImgVar('Evaluate').skin = 'Game/UI/Victory/sbml.png';\r\n                }\r\n                else {\r\n                    if (_Game._GeneralPencils._pitchName == 'colours') {\r\n                        this.ImgVar('Evaluate').skin = 'Game/UI/Victory/jmjl.png';\r\n                    }\r\n                    else {\r\n                        this.ImgVar('Evaluate').skin = 'Game/UI/Victory/pptt.png';\r\n                    }\r\n                }\r\n                let num = 25;\r\n                Click._on(Click._Type.largen, this.btnVar('BtnNext'), this, null, null, () => {\r\n                    if (this['BtnNextSwitch']) {\r\n                        return;\r\n                    }\r\n                    else {\r\n                        this['BtnNextSwitch'] = true;\r\n                    }\r\n                    _Gold._getGoldAni_Heap(Laya.stage, 15, 55, 51, `Game/UI/Victory/jb.png`, null, null, null, () => {\r\n                        ADManager.TAPoint(TaT.BtnClick, 'close_end');\r\n                        _Gold._addGold(num);\r\n                        EventAdmin._notify(_Game._Event.colseScene);\r\n                        this.lwgOpenScene(_SceneName.Start);\r\n                    });\r\n                });\r\n                Click._on(Click._Type.largen, this.btnVar('BtnThreeGet'), this, null, null, () => {\r\n                    if (this['BtnThreeGetSwitch']) {\r\n                        return;\r\n                    }\r\n                    else {\r\n                        this['BtnThreeGetSwitch'] = true;\r\n                    }\r\n                    ADManager.ShowReward(() => {\r\n                        ADManager.TAPoint(TaT.BtnClick, 'ADrewardbt_end');\r\n                        _Gold._getGoldAni_Heap(Laya.stage, 15, 55, 51, `Game/UI/Victory/jb.png`, null, null, null, () => {\r\n                            _Gold._addGold(num * 3);\r\n                            EventAdmin._notify(_Game._Event.colseScene);\r\n                            this.lwgOpenScene(_SceneName.Start);\r\n                        });\r\n                    });\r\n                });\r\n            });\r\n        }\r\n        lwgOnDisable() {\r\n            ADManager.TAPoint(TaT.PageLeave, 'endpage');\r\n        }\r\n    }\r\n    _Victory.Victory = Victory;\r\n})(_Victory || (_Victory = {}));\r\nexport default _Victory.Victory;\r\n",
  "references": [
    "D:/Game/project/Drawing/Project_2.5.0/Drawing_2.5.0/src/script/TJ/Admanager.ts",
    "D:/Game/project/Drawing/Project_2.5.0/Drawing_2.5.0/src/script/TJ/RecordManager.ts",
    "D:/Game/project/Drawing/Project_2.5.0/Drawing_2.5.0/src/script/Frame/Lwg.ts",
    "D:/Game/project/Drawing/Project_2.5.0/Drawing_2.5.0/src/script/Frame/OldEffects.ts",
    "D:/Game/project/Drawing/Project_2.5.0/Drawing_2.5.0/src/script/Frame/TweenMgr.ts",
    "D:/Game/project/Drawing/Project_2.5.0/Drawing_2.5.0/src/script/Frame/_Game.ts",
    "D:/Game/project/Drawing/Project_2.5.0/Drawing_2.5.0/src/script/Frame/_PreLoad.ts",
    "D:/Game/project/Drawing/Project_2.5.0/Drawing_2.5.0/src/script/Frame/_Share.ts",
    "D:/Game/project/Drawing/Project_2.5.0/Drawing_2.5.0/src/script/Frame/_Special.ts"
  ]
}
