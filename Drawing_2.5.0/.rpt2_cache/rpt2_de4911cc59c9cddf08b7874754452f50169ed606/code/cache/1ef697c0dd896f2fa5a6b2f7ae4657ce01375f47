{
  "code": "import lwg from \"./Lwg\";\r\nexport var _Execution;\r\n(function (_Execution) {\r\n    _Execution._execution = {\r\n        get value() {\r\n            if (!this['_Execution_executionNum']) {\r\n                return Laya.LocalStorage.getItem('_Execution_executionNum') ? Number(Laya.LocalStorage.getItem('_Execution_executionNum')) : 5;\r\n            }\r\n            return this['_Execution_executionNum'];\r\n        },\r\n        set value(val) {\r\n            console.log(val);\r\n            this['_Execution_executionNum'] = val;\r\n            if (_Execution._ExecutionNode) {\r\n                let num = _Execution._ExecutionNode.getChildByName('Num');\r\n                num.value = val.toString();\r\n            }\r\n            Laya.LocalStorage.setItem('_Execution_executionNum', val.toString());\r\n        }\r\n    };\r\n    _Execution._addExDate = {\r\n        get value() {\r\n            if (!this['_Execution_addExDate']) {\r\n                return Laya.LocalStorage.getItem('_Execution_addExDate') ? Number(Laya.LocalStorage.getItem('_Execution_addExDate')) : (new Date()).getDay();\r\n            }\r\n            return this['_Execution_addExDate'];\r\n        },\r\n        set value(val) {\r\n            this['_Execution_addExDate'] = val;\r\n            Laya.LocalStorage.setItem('_Execution_addExDate', val.toString());\r\n        }\r\n    };\r\n    _Execution._addExHours = {\r\n        get value() {\r\n            if (!this['_Execution_addExHours']) {\r\n                return Laya.LocalStorage.getItem('_Execution_addExHours') ? Number(Laya.LocalStorage.getItem('_Execution_addExHours')) : (new Date()).getHours();\r\n            }\r\n            return this['_Execution_addExHours'];\r\n        },\r\n        set value(val) {\r\n            this['_Execution_addExHours'] = val;\r\n            Laya.LocalStorage.setItem('_Execution_addExHours', val.toString());\r\n        }\r\n    };\r\n    _Execution._addMinutes = {\r\n        get value() {\r\n            if (!this['_Execution_addMinutes']) {\r\n                return Laya.LocalStorage.getItem('_Execution_addMinutes') ? Number(Laya.LocalStorage.getItem('_Execution_addMinutes')) : (new Date()).getMinutes();\r\n            }\r\n            return this['_Execution_addMinutes'];\r\n        },\r\n        set value(val) {\r\n            this['_Execution_addMinutes'] = val;\r\n            Laya.LocalStorage.setItem('_Execution_addMinutes', val.toString());\r\n        }\r\n    };\r\n    function _createExecutionNode(parent) {\r\n        if (!parent) {\r\n            parent = Laya.stage;\r\n        }\r\n        if (_Execution._ExecutionNode) {\r\n            _Execution._ExecutionNode.removeSelf();\r\n        }\r\n        let sp;\r\n        Laya.loader.load('prefab/ExecutionNum.json', Laya.Handler.create(this, function (prefab) {\r\n            let _prefab = new Laya.Prefab();\r\n            _prefab.json = prefab;\r\n            sp = Laya.Pool.getItemByCreateFun('prefab', _prefab.create, _prefab);\r\n            parent.addChild(sp);\r\n            let num = sp.getChildByName('Num');\r\n            sp.pos(-300, 77);\r\n            sp.zOrder = 50;\r\n            _Execution._ExecutionNode = sp;\r\n        }));\r\n    }\r\n    _Execution._createExecutionNode = _createExecutionNode;\r\n    function _createAddExecution(x, y, func) {\r\n        let sp;\r\n        Laya.loader.load('prefab/execution.json', Laya.Handler.create(this, function (prefab) {\r\n            let _prefab = new Laya.Prefab();\r\n            _prefab.json = prefab;\r\n            sp = Laya.Pool.getItemByCreateFun('prefab', _prefab.create, _prefab);\r\n            Laya.stage.addChild(sp);\r\n            sp.x = Laya.stage.width / 2;\r\n            sp.y = Laya.stage.height / 2;\r\n            sp.zOrder = 50;\r\n            if (_Execution._ExecutionNode) {\r\n                lwg.Animation2D.move_Simple_01(sp, sp.x, sp.y, _Execution._ExecutionNode.x, _Execution._ExecutionNode.y, 800, 100, f => {\r\n                    lwg.Animation2D.fadeOut(sp, 1, 0, 200, 0, f => {\r\n                        lwg.Animation2D.upDwon_Shake(_Execution._ExecutionNode, 10, 80, 0, null);\r\n                        if (func) {\r\n                            func();\r\n                        }\r\n                    });\r\n                });\r\n            }\r\n        }));\r\n    }\r\n    _Execution._createAddExecution = _createAddExecution;\r\n    function createConsumeEx(subEx) {\r\n        let label = Laya.Pool.getItemByClass('label', Laya.Label);\r\n        label.name = 'label';\r\n        Laya.stage.addChild(label);\r\n        label.text = '-2';\r\n        label.fontSize = 40;\r\n        label.bold = true;\r\n        label.color = '#59245c';\r\n        label.x = _Execution._ExecutionNode.x + 100;\r\n        label.y = _Execution._ExecutionNode.y - label.height / 2 + 4;\r\n        label.zOrder = 100;\r\n        lwg.Animation2D.fadeOut(label, 0, 1, 200, 150, f => {\r\n            lwg.Animation2D.leftRight_Shake(_Execution._ExecutionNode, 15, 60, 0, null);\r\n            lwg.Animation2D.fadeOut(label, 1, 0, 600, 400, f => {\r\n            });\r\n        });\r\n    }\r\n    _Execution.createConsumeEx = createConsumeEx;\r\n    class Execution extends lwg.Admin._Object {\r\n        constructor() {\r\n            super(...arguments);\r\n            this.time = 0;\r\n            this.countNum = 59;\r\n            this.timeSwitch = true;\r\n        }\r\n        lwgOnAwake() {\r\n            this.Num = this.owner.getChildByName('Num');\r\n            this.CountDown = this.owner.getChildByName('CountDown');\r\n            this.CountDown_board = this.owner.getChildByName('CountDown_board');\r\n            this.countNum = 59;\r\n            this.CountDown.text = '00:' + this.countNum;\r\n            this.CountDown_board.text = this.CountDown.text;\r\n            let d = new Date;\r\n            if (d.getDate() !== _Execution._addExDate.value) {\r\n                _Execution._execution.value = 5;\r\n            }\r\n            else {\r\n                if (d.getHours() == _Execution._addExHours.value) {\r\n                    console.log(d.getMinutes(), _Execution._addMinutes.value);\r\n                    _Execution._execution.value += (d.getMinutes() - _Execution._addMinutes.value);\r\n                    if (_Execution._execution.value > 5) {\r\n                        _Execution._execution.value = 5;\r\n                    }\r\n                }\r\n                else {\r\n                    _Execution._execution.value = 5;\r\n                }\r\n            }\r\n            this.Num.value = _Execution._execution.value.toString();\r\n            _Execution._addExDate.value = d.getDate();\r\n            _Execution._addExHours.value = d.getHours();\r\n            _Execution._addMinutes.value = d.getMinutes();\r\n        }\r\n        countDownAddEx() {\r\n            this.time++;\r\n            if (this.time % 60 == 0) {\r\n                this.countNum--;\r\n                if (this.countNum < 0) {\r\n                    this.countNum = 59;\r\n                    _Execution._execution.value += 1;\r\n                    this.Num.value = _Execution._execution.value.toString();\r\n                    let d = new Date;\r\n                    _Execution._addExHours.value = d.getHours();\r\n                    _Execution._addMinutes.value = d.getMinutes();\r\n                }\r\n                if (this.countNum >= 10 && this.countNum <= 59) {\r\n                    this.CountDown.text = '00:' + this.countNum;\r\n                    this.CountDown_board.text = this.CountDown.text;\r\n                }\r\n                else if (this.countNum >= 0 && this.countNum < 10) {\r\n                    this.CountDown.text = '00:0' + this.countNum;\r\n                    this.CountDown_board.text = this.CountDown.text;\r\n                }\r\n            }\r\n        }\r\n        lwgOnUpdate() {\r\n            if (Number(this.Num.value) >= 5) {\r\n                if (this.timeSwitch) {\r\n                    _Execution._execution.value = 5;\r\n                    this.Num.value = _Execution._execution.value.toString();\r\n                    this.CountDown.text = '00:00';\r\n                    this.CountDown_board.text = this.CountDown.text;\r\n                    this.countNum = 60;\r\n                    this.timeSwitch = false;\r\n                }\r\n            }\r\n            else {\r\n                this.timeSwitch = true;\r\n                this.countDownAddEx();\r\n            }\r\n        }\r\n    }\r\n    _Execution.Execution = Execution;\r\n})(_Execution || (_Execution = {}));\r\nexport default _Execution.Execution;\r\n",
  "references": [
    "C:/Users/tomato/Desktop/Drawing_2.5.0/src/script/Frame/Lwg.ts"
  ]
}
