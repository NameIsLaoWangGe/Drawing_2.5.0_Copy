{
  "code": "import ADManager from \"../TJ/Admanager\";\r\nimport { Admin, Click } from \"./lwg\";\r\nimport TreasureItem from \"./TreasureItem\";\r\nimport TweenMgr from \"./TweenMgr\";\r\nexport var _Treasure;\r\n(function (_Treasure) {\r\n    function _init() {\r\n    }\r\n    _Treasure._init = _init;\r\n    class Treasure extends Admin._SceneBase {\r\n        constructor() {\r\n            super(...arguments);\r\n            this.itemList = [];\r\n            this.settleFixY = 260;\r\n            this.needShowAD = [[1, 2, 6], [2, 6, 7], [3, 5, 6], [2, 4, 7], [0, 5, 7]];\r\n        }\r\n        lwgOnAwake() {\r\n            Treasure.boxOpenCount = 0;\r\n            this.leftTimes = 3;\r\n            this.leftScd = 4;\r\n            this.getKeyValid = true;\r\n            this.quitValid = true;\r\n            let showAD = [-1, -1, -1];\r\n            if (!Treasure.isAttach) {\r\n                if (Treasure.isFirst) {\r\n                    Treasure.isFirst = false;\r\n                }\r\n                else {\r\n                    showAD = this.needShowAD[TweenMgr.randomInRange_iWithOutY(0, this.needShowAD.length)];\r\n                }\r\n            }\r\n            else {\r\n                showAD = this.needShowAD[TweenMgr.randomInRange_iWithOutY(0, this.needShowAD.length)];\r\n            }\r\n            for (let i = 0; i < 9; i++) {\r\n                let c = \"Card\" + i;\r\n                let item = new TreasureItem(i, this.ImgVar(c), this);\r\n                this.itemList.push(item);\r\n                this.btnEv(c, () => {\r\n                    item.clickItem();\r\n                });\r\n                TJ.API.AppInfo.Channel() == TJ.Define.Channel.AppRt.OPPO_AppRt;\r\n                {\r\n                    if (showAD.indexOf(i) >= 0) {\r\n                        item.setAD();\r\n                    }\r\n                }\r\n            }\r\n            this.ImgVar(\"BtnMoreKey\").visible = false;\r\n            this.ImgVar(\"BtnDirect\").visible = false;\r\n            let json = Laya.loader.getRes(\"Prefab/CoinPref.json\");\r\n            this.pref = new Laya.Prefab();\r\n            this.pref.json = json;\r\n        }\r\n        lwgBtnClick() {\r\n            Click._on(Click._Type.largen, this.ImgVar(\"BtnMoreKey\"), this, null, null, (e) => {\r\n                ADManager.ShowReward(() => {\r\n                    this.ImgVar(\"BtnMoreKey\").visible = false;\r\n                    this.ImgVar(\"BtnDirect\").visible = false;\r\n                    this.getKeyValid = false;\r\n                    this.checkTimes(3);\r\n                });\r\n            });\r\n            Click._on(Click._Type.largen, this.ImgVar(\"BtnDirect\"), this, null, null, (e) => {\r\n                console.log(\"关闭宝箱界面\");\r\n            });\r\n        }\r\n        lwgOnDisable() {\r\n        }\r\n        checkTimes(delta) {\r\n            this.leftTimes += delta;\r\n            if (this.leftTimes == 0) {\r\n                if (Treasure.boxOpenCount == 9) {\r\n                    this.ImgVar(\"BtnMoreKey\").visible = false;\r\n                    this.ImgVar(\"BtnDirect\").visible = true;\r\n                }\r\n                else {\r\n                    this.ImgVar(\"BtnMoreKey\").visible = true;\r\n                    this.ImgVar(\"BtnDirect\").visible = true;\r\n                }\r\n            }\r\n        }\r\n    }\r\n    Treasure.isFirst = true;\r\n    Treasure.boxOpenCount = 0;\r\n    Treasure.isAttach = false;\r\n    _Treasure.Treasure = Treasure;\r\n})(_Treasure || (_Treasure = {}));\r\nexport default _Treasure.Treasure;\r\n",
  "references": [
    "C:/Users/tomato/Desktop/Drawing_2.5.0/src/script/TJ/Admanager.ts",
    "C:/Users/tomato/Desktop/Drawing_2.5.0/src/script/Frame/lwg.ts",
    "C:/Users/tomato/Desktop/Drawing_2.5.0/src/script/Frame/TreasureItem.ts",
    "C:/Users/tomato/Desktop/Drawing_2.5.0/src/script/Frame/Tweener.ts",
    "C:/Users/tomato/Desktop/Drawing_2.5.0/src/script/Frame/TweenMgr.ts"
  ]
}
